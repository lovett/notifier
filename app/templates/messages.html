<main class="stacked">
    <div>
        <notifier-status-bar></notifier-status-bar>
        <p class="app-message" ng-if="appMessage">{{ appMessage }}</p>
    </div>

    <div class="growable">
        <div ng-show="messageListVisible" ng-class="{columns: (queue.messages |toArray).length > 1}">
            <a ng-href="{{message.url}}"
               rel="noreferrer"
               target="_blank"
               class="message {{message.group}}"
               ng-class="{linked: message.url, expired: message.isExpired(), focused: message.active, extended: message.extended, stuck: message.state == 'stuck', hidden: message.state == 'clearing'}"
               ng-repeat="message in queue.messages | toArray | orderBy: 'received': true"
               ng-swipe-left="message.extended = true"
               ng-swipe-right="message.extended = false"
               notifier-focus="message.active"
               tabindex="0">

                <div class="badge">
                    <div ng-hide="message.badge"></div>
                    <img ng-show="message.badge" ng-src="{{message.badge }}" alt="" title="" />
                </div>

                <header>
                    <h1 ng-show="message.title">
                        <span>{{message.title}}</span>
                    </h1>
                    <time datetime="{{::message.received | date:'yyyy-MM-ddTHH:mmZ'}}">
                        {{ message.received | reldate }}
                    </time>
                    <p class="expiration" ng-if="message.expiresAt">
                        Expires {{ message.expiresAt | reldate: message.timeRemaining }}
                    </p>
		    <p class="domain" ng-if="message.domain">{{message.domain}}</p>
                </header>
                <p ng-show="message.body" ng-bind-html="message.body"></p>

                <div class="options standard-options" notifier-message-options public-id="{{::message.publicId}}"></div>
                <div class="index">{{ $index + 1 }}</div>
            </a>
        </div>
    </div>
    <div>
        <footer notifier-bottomnav></footer>
    </div>
</main>
