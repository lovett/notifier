<?xml version="1.0" encoding="UTF-8"?>

<project name="Notifier" basedir="." default="default" description="Deployment tasks for notifier">
  <property name="tmp" value="/tmp" />

  <property name="production.host" value="" />
  <property name="production.docroot" value="" />

  <target name="default">
    <echo msg="The default target is deliberately empty." />
  </target>

  <target name="deploy.dev-to-production" description="Deploy the current checkout to production">
    <if>
      <equals arg1="${production.host}" arg2="" />
      <then>
        <fail message="No value specified for production.host" />
      </then>
    </if>

    <if>
      <equals arg1="${production.docroot}" arg2="" />
      <then>
        <fail message="No value specified for production.docroot" />
      </then>
    </if>

    <exec passthru="true" command="rsync -avz -C --exclude-from rsync.exclude --delete --delete-excluded ./ ${production.host}:${production.docroot}" />
  </target>

</project>
