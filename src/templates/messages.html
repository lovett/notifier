<ng-include src="'/templates/header.html'"></ng-include>

<main id="no-messages" ng-show="queue.pristine === false && queue.messages.length === 0">
    <p>There are no new messages.</p>
</main>

<main class="message-wrapper">
    <article class="message {{ message.badge }}" ng-class="{extended: message.extended}" ng-repeat="message in queue.messages" ng-swipe-left="message.extended = true" ng-swipe-right="message.extended = false">
        <div class="options standard-options">
            <a ng-href="" ng-hide="connectionStatus !== 'connected'" ng-click="queue.clear(message.publicId)"><span>Clear</span></a>
        </div>

        <div class="badge"></div>

        <h1 ng-show="message.title">
            <a ng-if="message.url" ng-href="{{ message.url }}" target="_blank">{{ message.title }}</a>
            <span ng-if="!message.url">{{ message.title }}</span>
        </h1>
        <time datetime="{{ message.received | date:'yyyy-MM-ddTHH:mmZ' }}">
            {{ message.received | date:'h:mm a' }}
            {{ message.received | reldate | date: 'EEEE MMMM d' }}
        </time>
        <p ng-show="message.body" ng-bind-html="message.body"></p>
    </article>
</main>
